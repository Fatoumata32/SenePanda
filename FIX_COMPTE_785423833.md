# ğŸ”§ Guide de DÃ©blocage - Compte +221785423833

## ğŸ¯ ProblÃ¨me
Le compte ne peut pas se connecter mÃªme aprÃ¨s rÃ©initialisation du mot de passe.

## âš ï¸ Cause Probable
Le mot de passe a Ã©tÃ© dÃ©fini Ã  **"1234"** au lieu de **"001234"** dans Supabase Dashboard.

---

## âœ… Solution en 3 Ã‰tapes

### Ã‰tape 1 : ExÃ©cuter le Script SQL

1. **Ouvrir Supabase Dashboard** : https://supabase.com/dashboard
2. **SÃ©lectionner votre projet SenePanda**
3. **Aller dans** : SQL Editor (icÃ´ne `<>` dans le menu gauche)
4. **Copier-coller** le contenu du fichier :
   ```
   supabase/migrations/fix_user_password_221785423833.sql
   ```
5. **Cliquer sur** : `RUN` (bouton vert en haut Ã  droite)

**Ce que fait ce script :**
- âœ… VÃ©rifie que le compte existe
- âœ… Confirme automatiquement l'email (dÃ©bloque la connexion)
- âœ… ComplÃ¨te les informations du profil si manquantes
- âœ… Affiche un rÃ©sumÃ© complet du compte

---

### Ã‰tape 2 : RÃ©initialiser le Mot de Passe dans Dashboard

1. **Aller dans** : Authentication > Users
2. **Chercher** : `+221785423833@senepanda.app`
3. **Cliquer** sur l'utilisateur dans la liste
4. **Cliquer** sur le bouton **`...`** (trois points en haut Ã  droite)
5. **SÃ©lectionner** : `Reset Password` ou `Update user`
6. **Dans le champ Password, taper** : `001234`

```
âš ï¸ TRÃˆS IMPORTANT :
   Taper EXACTEMENT : 001234
   PAS : 1234
   AVEC les deux zÃ©ros au dÃ©but : 0-0-1-2-3-4
```

7. **Cocher** (si disponible) : `Auto Confirm User`
8. **Cliquer sur** : `Update user` ou `Save`

---

### Ã‰tape 3 : Tester la Connexion

1. **Ouvrir l'application SenePanda**
2. **Sur l'Ã©cran de connexion** :
   - NumÃ©ro : `+221 78 542 38 33`
   - Code PIN : `1234` (4 chiffres)
3. **Cliquer sur** : `Se connecter`

**Comment Ã§a fonctionne :**
```
Utilisateur tape : 1234 (4 chiffres)
        â†“
Application ajoute padding : 001234 (6 caractÃ¨res)
        â†“
Supabase compare avec : 001234 (mot de passe stockÃ©)
        â†“
Connexion rÃ©ussie ! âœ…
```

---

## ğŸ” VÃ©rification

AprÃ¨s la rÃ©initialisation, vÃ©rifiez dans **SQL Editor** :

```sql
SELECT
  p.phone,
  p.full_name,
  au.email,
  au.email_confirmed_at,
  au.last_sign_in_at
FROM profiles p
LEFT JOIN auth.users au ON p.id = au.id
WHERE p.phone = '+221785423833';
```

**RÃ©sultat attendu :**
- âœ… `email_confirmed_at` : Date affichÃ©e (pas NULL)
- âœ… `last_sign_in_at` : Mis Ã  jour aprÃ¨s connexion rÃ©ussie

---

## ğŸš¨ Si Ã§a ne fonctionne toujours pas

### Option A : VÃ©rifier les Logs
1. **Dashboard > Logs**
2. Chercher les erreurs liÃ©es Ã  `+221785423833@senepanda.app`
3. VÃ©rifier le message d'erreur exact

### Option B : CrÃ©er un Nouveau Compte

Si le problÃ¨me persiste, supprimer et recrÃ©er :

```sql
-- 1. Supprimer le profil
DELETE FROM profiles WHERE phone = '+221785423833';

-- 2. Supprimer l'utilisateur Auth
-- (via Dashboard > Authentication > Users > Delete)
```

Puis :
1. **Ouvrir l'application SenePanda**
2. **S'inscrire** avec :
   - PrÃ©nom : [Votre prÃ©nom]
   - Nom : [Votre nom]
   - NumÃ©ro : +221 78 542 38 33
   - Code PIN : 1234

---

## ğŸ“‹ Checklist

- [ ] Script SQL exÃ©cutÃ© avec succÃ¨s
- [ ] Email confirmÃ© (date affichÃ©e dans email_confirmed_at)
- [ ] Profil complÃ©tÃ© (first_name, last_name prÃ©sents)
- [ ] Mot de passe rÃ©initialisÃ© Ã  **001234** dans Dashboard
- [ ] Connexion testÃ©e avec PIN **1234**
- [ ] Connexion rÃ©ussie âœ…

---

## ğŸ’¡ Rappel Important

### Pour l'Administrateur (Supabase Dashboard)
```
Mot de passe Ã  dÃ©finir : 001234 (6 caractÃ¨res)
```

### Pour l'Utilisateur (Application)
```
Code PIN Ã  taper : 1234 (4 chiffres)
```

**Le padding (00) est ajoutÃ© automatiquement par l'application !**

---

## ğŸ†˜ Besoin d'Aide ?

Si le problÃ¨me persiste aprÃ¨s ces 3 Ã©tapes :
1. VÃ©rifier que le script SQL s'est exÃ©cutÃ© sans erreur
2. VÃ©rifier que le mot de passe est bien `001234` (pas `1234`)
3. VÃ©rifier que l'email est confirmÃ©
4. Essayer de crÃ©er un nouveau compte (Option B)

---

**CrÃ©Ã© le** : 29 Novembre 2025
**Pour le compte** : +221785423833
**Nouveau PIN** : 1234 (4 chiffres)
**Password Supabase** : 001234 (6 caractÃ¨res avec padding)
